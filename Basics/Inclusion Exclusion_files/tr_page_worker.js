!function(t,e,a){"use strict";a.worker={events:{load:t,unload:t,scroll:t,message:t,DOMContentLoaded:e},userScroll:!0,translator:null,initialize:function(e){var a=this.events;e=e||{},Object.keys(a).forEach(function(t){a[t].addEventListener(t,this,!1)},this),e.href=t.location.href,this.sendMessage("inited",e)},loadHandler:function(){this.sendMessage("loaded")},handleEvent:function(t){this[t.type+"Handler"](t)},sendMessage:function(e,a){t.parent.postMessage(JSON.stringify({type:e,data:a}),"*")},unloadHandler:function(){var t=this.events;this.sendMessage("unloading"),this.translator&&(this.translator.halt(),this.translator=null),Object.keys(t).forEach(function(e){t[e].removeEventListener(e,this,!1)},this)},scrollHandler:function(){var t=this.getScrollInfo();this.userScroll?this.sendMessage("scrolling",{x:t.x/(t.W-t.w),y:t.y/(t.H-t.h)}):this.userScroll=!0},getScrollInfo:function(){var a="BackCompat"===e.compatMode?e.body:e.documentElement;return{x:t.pageXOffset||a.scrollLeft,y:t.pageYOffset||a.scrollTop,w:a.clientWidth,h:a.clientHeight,W:a.scrollWidth,H:a.scrollHeight}},messageHandler:function(e){var s,n=this,r=e.data;try{r=JSON.parse(r)}catch(o){r=null}if(r)switch(r.type){case"undo":this.translator&&this.translator.undo();break;case"redo":this.translator&&this.translator.redo();break;case"halt":this.translator&&this.translator.halt();break;case"start":a.trDir=[r.data.sourceLang,r.data.targetLang].join("-"),this.translator&&(this.translator.undo(),this.translator.translate(r.data.sourceLang,r.data.targetLang));break;case"create":if(this.translator)break;this.translator=new a.PageTranslator(r.data||a.config),this.translator.on("complete",function(){n.sendMessage("complete")}).on("progress",function(t){n.sendMessage("progress",t)}).on("error",function(t){n.sendMessage("partialError",t)});break;case"rename":t.name=r.data;break;case"scroll":this.userScroll=!1,s=this.getScrollInfo(),t.scroll(r.data.x*(s.W-s.w),r.data.y*(s.H-s.h))}},DOMContentLoadedHandler:function(){this.sendMessage("ready")}}}(this,this.document,this.yt=this.yt||{});